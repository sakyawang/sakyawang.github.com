<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>react-conditional-render</title>
  
    <meta name="description" content="React有条件渲染">
  
    <meta name="author" content="Hao Wang">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">Sakyawang</a>
          <ul class="nav">
            
              


  <li><a href="/archive">Archive</a></li>


            
              


  <li><a href="/tags">Tags</a></li>


            
              


  <li><a href="/categories">Categories</a></li>


            
              


  <li><a href="/pages">Pages</a></li>


            
              


  <li><a href="/about">About Me</a></li>


            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="page-header">
  <h1>react-conditional-render </h1>
</div>

<div class="row">
  <div class="span8">
    <blockquote>
<p>在React中，你可以创建不同的组件来封装你需要的行为。然后根据应用的状态来渲染需要的内容。</p>
</blockquote>

<p>React中的条件渲染和js中的条件表达式一样。使用JavaScript的关键字<code>if</code>或者<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">条件运算符</a>创建表示当前状态的元素，然后React更新UI来匹配元素。</p>

<p>想一下下面两个组件：</p>

<pre><code class="language-js">function UserGreeting(props) {
  return &lt;h1&gt;Welcome back!&lt;/h1&gt;;
}

function GuestGreeting(props) {
  return &lt;h1&gt;Please sign up.&lt;/h1&gt;;
}
</code></pre>

<p>我们创建一个<code>Greeting</code>组件，根据用户是否登录来显示以上组件中的某一个：</p>

<pre><code class="language-js">function Greeting(props) {
  const isLoggedIn = props.isLoggedIn;
  if (isLoggedIn) {
    return &lt;UserGreeting /&gt;;
  }
  return &lt;GuestGreeting /&gt;;
}

ReactDOM.render(
  // Try changing to isLoggedIn={true}:
  &lt;Greeting isLoggedIn={false} /&gt;,
  document.getElementById('root')
);
</code></pre>

<p><a href="https://codepen.io/gaearon/pen/ZpVxNq?editors=0011">demo</a></p>

<p>此示例根据<code>isLoggedIn</code>属性的值显示不同的问候语。</p>

<h2>元素变量</h2>

<p>可以使用变量存储元素。这可以帮助你有条件地显示组件的一部分，而其余的输出不会改变。</p>

<p>考虑这两个代表注销和登录按钮的新组件：</p>

<pre><code class="language-js">function LoginButton(props) {
  return (
    &lt;button onClick={props.onClick}&gt;
      Login
    &lt;/button&gt;
  );
}

function LogoutButton(props) {
  return (
    &lt;button onClick={props.onClick}&gt;
      Logout
    &lt;/button&gt;
  );
}
</code></pre>

<p>在下面的例子中，我们将创建一个有状态组件<code>LoginControl</code>。</p>

<p>它将根据当前状态显示<code>&lt;LoginButton /&gt;</code>或<code>&lt;LogoutButton /&gt;</code>。它也将显示前面例子中的<code>&lt;Greeting /&gt;</code>：</p>

<pre><code class="language-js">class LoginControl extends React.Component {
  constructor(props) {
    super(props);
    this.handleLoginClick = this.handleLoginClick.bind(this);
    this.handleLogoutClick = this.handleLogoutClick.bind(this);
    this.state = {isLoggedIn: false};
  }

  handleLoginClick() {
    this.setState({isLoggedIn: true});
  }

  handleLogoutClick() {
    this.setState({isLoggedIn: false});
  }

  render() {
    const isLoggedIn = this.state.isLoggedIn;

    let button = null;
    if (isLoggedIn) {
      button = &lt;LogoutButton onClick={this.handleLogoutClick} /&gt;;
    } else {
      button = &lt;LoginButton onClick={this.handleLoginClick} /&gt;;
    }

    return (
      &lt;div&gt;
        &lt;Greeting isLoggedIn={isLoggedIn} /&gt;
        {button}
      &lt;/div&gt;
    );
  }
}

ReactDOM.render(
  &lt;LoginControl /&gt;,
  document.getElementById('root')
);
</code></pre>

<p><a href="https://codepen.io/gaearon/pen/QKzAgB?editors=0010">demo</a></p>

<p>尽管声明一个变量并使用if语句是条件渲染组件的好方法，但是有时你可能想使用更短的语法。如下所述，在JSX中有几种方法可以内联条件。</p>

<h3>内联if和&amp;&amp;逻辑运算符</h3>

<p>你可以在JSX中<a href="https://reactjs.org/docs/introducing-jsx.html#embedding-expressions-in-jsx">嵌入任何表达式</a>，用大括号括起来。包括JavaScript逻辑&amp;&amp;运算符。可以很方便有条件地包含一个元素:</p>

<pre><code class="language-js">function Mailbox(props) {
  const unreadMessages = props.unreadMessages;
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      {unreadMessages.length &gt; 0 &amp;&amp;
        &lt;h2&gt;
          You have {unreadMessages.length} unread messages.
        &lt;/h2&gt;
      }
    &lt;/div&gt;
  );
}

const messages = ['React', 'Re: React', 'Re:Re: React'];
ReactDOM.render(
  &lt;Mailbox unreadMessages={messages} /&gt;,
  document.getElementById('root')
);
</code></pre>

<p><a href="https://codepen.io/gaearon/pen/ozJddz?editors=0010">demo</a></p>

<p>在JavaScript中，<code>true &amp;&amp; expression</code>总是等于<code>expression</code>,<code>false &amp;&amp; expression</code>总是等于<code>false</code>。</p>

<p>因此，如果条件结果是<code>true</code>，<code>&amp;&amp;</code>运算符右侧的元素会输出。如果结果为<code>false</code>，React会忽略并跳过该元素。</p>

<h3>内联if-else和三目条件操作符</h3>

<p>另一种内联条件渲染元素的方法是使用JavaScript的三目运算符<code>condition ? true : false</code>。</p>

<p>在下面的例子中，我们使用它来有条件地渲染一小块文本:</p>

<pre><code class="language-js">render() {
  const isLoggedIn = this.state.isLoggedIn;
  return (
    &lt;div&gt;
      The user is &lt;b&gt;{isLoggedIn ? 'currently' : 'not'}&lt;/b&gt; logged in.
    &lt;/div&gt;
  );
}
</code></pre>

<p>它也可以用于较大的表达式，虽然不能明显看出逻辑：</p>

<pre><code class="language-js">render() {
  const isLoggedIn = this.state.isLoggedIn;
  return (
    &lt;div&gt;
      {isLoggedIn ? (
        &lt;LogoutButton onClick={this.handleLogoutClick} /&gt;
      ) : (
        &lt;LoginButton onClick={this.handleLoginClick} /&gt;
      )}
    &lt;/div&gt;
  );
}
</code></pre>

<p>就像在JavaScript中一样，根据自己和和团队认为更具可读性来选择合适的代码样式。还要记住，只要条件变得太复杂，可能是提取组件的好时机。</p>

<h2>防止组件重绘</h2>

<p>在极少数情况下，即使由另一个组件呈现，您也可能希望组件隐藏自己。为此，返回<code>null</code>而不是其渲染输出内容。</p>

<p>下面的例子，<code>&lt;WarningBanner /&gt;</code>组件根据属性<code>warn</code>值进行渲染。如果属性值是<code>false</code>组件则不渲染：</p>

<pre><code class="language-js">function WarningBanner(props) {
  if (!props.warn) {
    return null;
  }

  return (
    &lt;div className=&quot;warning&quot;&gt;
      Warning!
    &lt;/div&gt;
  );
}

class Page extends React.Component {
  constructor(props) {
    super(props);
    this.state = {showWarning: true}
    this.handleToggleClick = this.handleToggleClick.bind(this);
  }

  handleToggleClick() {
    this.setState(prevState =&gt; ({
      showWarning: !prevState.showWarning
    }));
  }

  render() {
    return (
      &lt;div&gt;
        &lt;WarningBanner warn={this.state.showWarning} /&gt;
        &lt;button onClick={this.handleToggleClick}&gt;
          {this.state.showWarning ? 'Hide' : 'Show'}
        &lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

ReactDOM.render(
  &lt;Page /&gt;,
  document.getElementById('root')
);
</code></pre>

<p><a href="https://codepen.io/gaearon/pen/Xjoqwm?editors=0010">demo</a></p>

<p>从组件的<code>render</code>方法返回<code>null</code>不会影响组件生命周期方法的触发。例如，<code>componentWillUpdate</code>和<code>componentDidUpdate</code>仍然会被调用。</p>

    <hr>
    <div class="pagination">
      <ul>
        <ul>
          
            <li class="prev"><a href="/react/react-event/" title="react-event">&larr; Previous</a></li>
          
          

            <li><a href="/archive">Archive</a></li>

          
            <li class="next"><a href="/React/react_components_props/" title="react_components_props">Next &rarr;</a></li>
          
          
        </ul>
      </ul>
    </div>
    <hr>
    
<div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>2017-11-15</span></div>
    <br>
    <h4>Categories</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/categories/#react-ref">react <span>8</span></a>
</li>
    
    </ul>
    <br>
    <h4>Tags</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/tags/#react-ref">react <span>9</span></a>
</li>
    
      <li>
  <a href="/tags/#render-ref">render <span>1</span></a>
</li>
    
      <li>
  <a href="/tags/#conditional-ref">conditional <span>1</span></a>
</li>
    
    </ul>
  </div>
</div>

      </div>

      <footer>
        <p>&copy; Hao Wang 2013 
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
<script src="//cdnjscn.b0.upaiyun.com/libs/prettify/r298/prettify.min.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

    
<script type="text/javascript">

  var _gaq = _gaq || [];
  var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-123-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
